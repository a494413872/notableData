---
tags: [java/jvm]
title: 携程对接
created: '2019-12-06T06:03:13.398Z'
modified: '2019-12-06T08:31:44.621Z'
---

# 携程对接

## 2.4 门票全/增量景点查询接口

1. 这个接口应该是我们去扫对方库。可以每次查询单独记录下来。
2. 是否可售我们应该选择的是所有？
3. 返回值返回spotIdlist
4. 综上，这个接口全量和增量可以统一处理，全量就看做1000条增量就好了。

## 2.5 门票景点详情 接口
1. 可以批量传soptID查询数据
2. 返回资源简单列表
## 2.6 门票资源详情
1. 传资源ID过去，返回资源详情

## 2.9 门票价格日历 
1. 传资源ID,可批量
2. 返回日期价格


## 2.10 门票可订性检查
1. 传资源id，不可批量。
2. 相当于我们的锁库存接口

## 2.11 门票创建订单 
1. 是申码接口还是锁库存接口？
2. 没有返回值字段描述

## 2.13 门票订单基本信息查询 
1. 可以拿到通关码
2. 可以猜测实现创单，然后再查询

## 2.20 资源价格增量
1. 跟2.4类似，但是功能应该不会重合
2. 返回的是资源id


不需要识别那些东西。

# 梳理驴迹逻辑
- 自动生成商品
    1. 判断是否存在产品
        - 存在使用
        - 不存在报错
    2. 判断是否存在规格
        - 存在使用
        - 不存在新建
    3. 插入商品基础表
    4. 设置有效期
    5. 设置onlylvmamaFlag
    6. 设置分销渠道
    7. 设置退改规则
    8. 设置改期
    9. 设置人工售票
    10. 推送商品的分销商关系给super系统
    11. 插入操作日志
- 自动生成规格
    1. 自动填充branch
    2. 自动填充branchProp
    3. 插入
    4. 插入日志
- 自动生成商品描述
    1. 更新desc
    2. 更新desc Json
    > 需要注意的是这个descJson挺麻烦的  
    3. 插入日志  
- 自动生成下单必填项
    1. 拼数据插入orderRequired就好了。
    2. 插入日志
- 自动生成时间价格
    1. 设置大量的默认值，拼接日期列表
    2. 插入时间价格表
    3. addComCalData
        





